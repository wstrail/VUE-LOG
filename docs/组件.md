# 组件

## 一、创建项目

```npm
npm init vue@latest
npm install
npm run dev
```

## 二、组件组成

### 1、单文件组件（sfc）

```vue
<template>
    <div  class="">{{ message }}</div>
</template>
<script>
    export default {
        data(){
            return{
                message:"组件基础组成"
            }
        }
    };
</script>
<style scoped><style><!--scoped：让当前样式只在当前组件中生效-->
```

### 2、引用组件(嵌套组件)

```vue
<template>
    <name/>
</template>
<script>
    import name from"route"
    export default{
    components:{
        name
    }
}
</script>
<style><style>
```

## 三、组件注册

### 1、全局注册

在 main.js 中操作

```javascript
import name from "route";
const app = createApp(App);
app.component("name", 组件名);
app.mount("#app");
```

### 2、局部注册

同组件引入

## 四、组件传递数据

### 1、props 传递

只能从父级传到子级，不能子级传给父级

父级代码范例

```vue
<template>
  <h3>Parent</h3>
  <Child :title="message" demo="test" />
</template>
<script>
import Child from "./Child.vue";
export default {
  data() {
    return {
      message: "parent数据!",
    };
  },
  components: {
    Child,
  },
};
</script>
```

`:title="message"`为动态传递`demo="test"`为静态传递

子级代码范例

```vue
<template>
  <h3>Child</h3>
  <p>{{ title }}</p>
  <p>{{ demo }}</p>
</template>
<script>
export default {
  data() {
    return {};
  },
  props: ["title", "demo"],
};
</script>
```

### 2、传递多种数据类型

可以通过动态传递的方式定义传递的数据类型

```vue
<template>
  <h3>Parent</h3>
  <Child :title="message" :age="age" />
</template>
<script>
import Child from "./Child.vue";
export default {
  data() {
    return {
      message: "parent数据!",
      age: 20,
    };
  },
  components: {
    Child,
  },
};
</script>
```

### 3、props 效验

检验 props 传入的类型是否和需要的一直若不一致则警告

子级代码范例

```vue
<template>
  <h3>child</h3>
  <p>{{ title }}</p>
</template>
<script>
export default {
  data() {
    return {};
  },
  props: { title: { type: String } },
  props: { title: { type: [String, Array, Number, Object] } }, //接受多种数据类型用[]数组//
};
</script>
```

若子级中需要由父级传递一个元素，但父级并未传递时，此处可以设定默认值输出

对于**字符串和数字**代码范例如下：

```vue
<template>
  <h3>child</h3>
  <p>{{ age }}</p>
</template>
<script>
export default {
  data() {
    return {};
  },
  props: { age: { type: Number, default: 0 } },
};
</script>
```

此处会默认输出 0

对于**数组和结构**代码如下：

```vue
<template>
  <h3>child</h3>
  <p>{{ names }}</p>
</template>
<script>
export default {
  data() {
    return {};
  },
  props: {
    names: {
      type: Array,
      default() {
        return "空";
      },
    },
  },
};
</script>
```

有些子级中的元素必须需要一个传递，称为必选项，可以使用`required`使其报警告

代码案例

```vue
<template>
  <h3>child</h3>
  <p>{{ age }}</p>
</template>
<script>
export default {
  data() {
    return {};
  },
  props: { age: { type: Number, required: true } },
};
</script>
```

注:父级传递过来的元素不能通过子级的操作而改变数值

## 四、组件事件

### 1、$emit

通过`$emit`实现自定义事件可以实现将子级的数据传递到父级

父级代码范例：

```vue
<template>
  <h3>组件事件</h3>
  <ComponenteventChild
    @someEvent="getHandle"
  /><!--getHandle为自定义函数"someEvent"在父亲代码的名称-->
  <p>父元素：{{ message }}</p>
</template>
<script>
import ComponenteventChild from "./ComponenteventChild.vue";
export default {
  data() {
    return {
      message: "",
    };
  },
  components: {
    ComponenteventChild,
  },
  methods: {
    getHandle(data) {
      this.message = data;
    },
  },
};
</script>
```

子级代码范例

```vue
<template>
  <h3>Child</h3>
  <button @click="clickEventHandle">传递数据</button>
</template>
<script>
export default {
  methods: {
    clickEventHandle() {
      this.$emit("someEvent", "data"); //someEvent是自定义函数名字//
    },
  },
};
</script>
```

### 2、v-model

在组件 A 中输入数据，在组件 B 中实时获取数据

父级代码

```vue
<template>
  <h3>Main</h3>
  <p>搜索内容为{{ search }}</p>
  <SearchComponent @searchevent="getsearch" />
</template>
<script>
import SearchComponent from "./searchComponent.vue";

export default {
  data() {
    return { search: "" };
  },
  components: { SearchComponent },
  methods: {
    getsearch(data) {
      this.search = data;
    },
  },
};
</script>
```

子级代码

```vue
<template><input type="text" v-model="search" /></template>
<script>
export default {
  data() {
    return {
      search: "",
    };
  },
  watch: {
    search(newValue, oldValue) {
      this.$emit("searchevent", newValue);
    },
  },
};
</script>
```
